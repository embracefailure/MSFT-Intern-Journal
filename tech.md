---
layout: page
title: 技术学习
permalink: /tech/
---

## Azure OpenAI
模型请求吞吐量是什么？
TTPS和RPS的区别是什么？
我创建代理的时候无法推理模型。

## Kubernetes
Kubernetes是一个开源的容器编排平台，用于自动化部署，扩展，管理容器化应用程序。 

kubernetes有哪些应用场景？
1. 微服务架构：大型应用被拆分成多个小型服务，每个服务可以独立部署，更新，扩展。
2. 滚动更新，保证服务不中断。
3. 混合云和多云部署：Kubernetes可以在不同的云平台上运行，提供一致的管理体验。
4. 大数据与机器学习：spark，tensorflow等大数据和机器学习框架可以在Kubernetes上运行，利用其资源管理和调度能力。

kubernetes给云厂商带来了什么好处？
1. 云厂商无需花费精力开发自己的容器编排系统，直接使用Kubernetes作为基础设施。
2. 增加客户粘性。K8s会与该云厂商的存储，网络，数据库，监控等服务深度集成。
3. 运行k8s上的应用需要很多虚拟机，存储和网络流量。客户部署的应用越多，云厂商的收入就越高。

kubernetes给用户带来了什么好处？
1. 弹性伸缩：Kubernetes可以根据负载自动调整应用的副本数量，确保资源的高效利用。
2. 自愈能力：当某个容器出现故障时，Kubernetes会自动重启或替换它，确保应用的高可用性。
3. 应用可移植性：Kubernetes提供了一致的API和工具，使得应用可以在不同的环境（本地，私有云，公有云）中无缝迁移。
4. 简化部署和运维：开发者只需要使用yaml文件，声明想要的应用状态，Kubernetes会自动处理部署，更新和扩展等操作。

kubernetes的核心组件有哪些？
- **kube-apiserver**：API 服务器。是整个系统唯一的入口和总管，所有组件都通过它来通信。你用命令行工具 `kubectl` 发送的指令，就是发给它的。
- **etcd**：分布式数据库。是 K8s 的“账本”和“大脑记忆区”，存储了整个集群的所有状态信息（比如，哪个应用部署了，需要多少个实例等）。可靠性至关重要。
- **kube-scheduler**：调度器。当一个新的应用实例（Pod）需要运行时，调度器会根据节点的资源情况、负载等因素，决定把它分配到哪个工作节点上。
- **kube-controller-manager**：控制器管理器。负责维护集群的状态，比如发现某个 Pod 挂了，它就会去通知 API Server 创建一个新的。它包含了很多控制器，像一个“监督小组”，确保一切按计划进行。

Azure kubernetes服务是如何工作的？

Azure Kubernetes 服务（AKS）的核心工作方式如下：

- **控制平面托管**：微软为你全权管理 Kubernetes 的控制平面（如 API Server、etcd 等），负责其安装、升级、备份和高可用。这些服务通常免费，极大简化了集群的运维工作。你只需通过 Azure 门户或命令行即可快速获得一个高可用、功能完备的 K8s 控制平面。

- **工作节点自主管理**：你只需决定和管理工作节点（即运行实际应用的虚拟机），并为这些 Azure 虚拟机（VM）付费。节点的类型和数量可根据业务需求灵活调整。

- **深度集成 Azure 生态**：
    - **身份认证**：可直接集成 Azure Active Directory (Azure AD)，实现细粒度的访问控制和身份管理。
    - **存储**：支持 Azure Disks 和 Azure Files 作为持久化存储，便于数据管理。
    - **网络**：与 Azure 虚拟网络（VNet）无缝对接，支持高级网络策略和安全隔离。
    - **监控**：集成 Azure Monitor，自动收集和分析日志、性能指标，便于运维和故障排查。

Azure kubernetes服务与其他云厂商的kubernetes服务相比，有哪些优势？

Azure Kubernetes 服务（AKS）相较于 AWS 的 EKS 和 Google Cloud 的 GKE，具备以下显著优势：

#### 1. 与微软生态系统的深度集成（尤其适合企业级用户）
- **Azure Active Directory (AAD) 集成**：可无缝对接 Office 365 及其他 Azure 服务，实现统一的权限管理和安全控制，是 AKS 的核心竞争力之一。
- **开发工具链优势**：与 Visual Studio Code、GitHub（如 GitHub Actions for AKS）深度集成，开发者可享受从编码、调试到部署的流畅体验。

#### 2. 强大的混合云能力
- **Azure Arc for Kubernetes**：支持将本地、AWS、GCP 等任意位置的 K8s 集群注册到 Azure，实现统一的管理和策略下发（如 Azure Policy、Azure Monitor），极大提升混合云和多云场景下的运维效率。

#### 3. 企业级安全与治理
- **Azure Policy for Kubernetes**：可在组织范围内强制实施统一的安全与合规策略（如禁止特权容器），满足大型企业的治理和合规需求。

#### 4. 成本效益与易用性
- **免费的控制平面**：与主流厂商一致，AKS 控制平面免费，仅需为工作节点付费。
- **上手简单**：支持图形化界面，集群创建与配置流程直观，极大降低了使用门槛。


## Security

### Azure 安全服务架构

#### Network Layer Controls
- **Network Security Groups (NSGs)**: 用于控制虚拟网络中的入站和出站流量。NSG可以应用于子网或子网与公网之间的traffic。
- **Azure Firewall**: 一个全托管的防火墙服务，提供状态检测、应用层过滤、威胁情报等功能。它是一种完全有状态的防火墙即服务（Firewall as a Service），具有内建高可用性和无限制的云端扩展能力，能够对**东西向流量（东西流）和南北向流量（南北流）**进行检测和过滤。

    Azure 防火墙提供三种版本（SKU）：

    Basic（基础版）：提供与标准版类似的简化安全功能，但不包含高级功能。

    Standard（标准版）：提供从网络层（L3）到应用层（L7）的过滤能力，并整合了来自 微软网络安全中心的威胁情报。

    Premium（高级版）：具备更高级的安全能力，包括基于特征码的入侵检测和防御系统（IDPS），可通过识别特定攻击模式来快速检测攻击行为。

### OAuth 2.0
用户在登录app的时候，想用微软账户登录，访问用户在这个app里面的资源，就涉及到OAuth 2.0协议。

对于app开发团队的好处：
1. 用户密码安全：app开发者再也不用存储和管理用户的密码了。OAuth 2.0的流程确保了用户的密码只在微软的网站上输入，app系统完全接触不到，从而彻底免除了密码泄露的风险。
2. 开发复杂性降低：app开发者不需要从零开始构建一整套用户系统。OAuth 2.0提供了一个标准化的‘剧本’，开发团队只需要调用几个API，就能完成安全的登录集成。

### Palo Alto Networks
Palo Alto Networks 是一家网络安全公司，提供防火墙、云安全、端点保护等解决方案。
NGFW（下一代防火墙）是其核心产品，结合了传统防火墙的功能和现代网络安全需求。
应用识别 (Application Awareness / Layer 7 Inspection)：它不再只看端口号。比如，很多应用都使用80/443端口，NGFW能分辨出这是正常的网页浏览，还是有人在用微信传文件，或者是在使用远程桌面软件进行非法控制。你可以制定“允许访问领英，但禁止在领英上传文件”这样的精细化策略。
用户识别 (User-ID)：它能将网络流量与具体的用户名（比如通过与Azure AD集成）关联起来。策略可以从“允许IP地址10.1.1.5访问”升级为“允许‘财务部张三’访问财务数据库”，这对于审计和追溯至关重要。
威胁防御 (Threat Prevention)：集成了入侵防御系统（IPS）、反病毒、反间谍软件、以及沙箱技术（如PANW的WildFire）。当发现一个可疑文件时，它会先在云端的安全沙箱里“引爆”它，看看它是否有害，然后再决定是否放行。这是防御未知威胁的关键。

### Firewall
根据预先设定的“规则”，检查所有试图通过它的网络流量（数据包），然后决定是“放行”、“拒绝”还是“丢弃”。

在Azure中，我们极少会为每一台虚拟机都配一个防火墙。正确的做法是采用中心辐射型网络拓扑（Hub-and-Spoke Model），将防火墙部署在中心（Hub）位置，进行集中管理。

### ATS Firewall选型
当客户符合以下特征时，Azure Firewall通常是首选：
追求云原生和简便性：客户希望获得与Azure平台无缝集成的、全托管的体验。他们不想管理防火墙底层的虚拟机、操作系统和高可用性配置。Azure Firewall点几下鼠标就能部署，自动扩缩容。
安全需求是“足够好”：客户需要强大的状态检测、基本的威胁情报和URL过滤，但没有极端精细化的应用层控制或防御未知威胁的硬性要求。
成本敏感型客户：对于中小型企业或安全需求不复杂的场景，Azure Firewall的性价比很高。
纯Azure环境：客户的主要业务都在Azure上，没有复杂的多云或混合云策略管理需求。

当客户符合以下特征时，你应该主动提及并推荐Palo Alto Networks：
已有Palo Alto Networks的投资和经验：这是最强烈的信号！如果客户的本地数据中心已经在使用PANW的物理防火墙，他们的安全团队已经非常熟悉其策略管理平台Panorama。在云上使用VM-Series可以让他们复用现有的安全策略、知识体系和管理工具，实现混合云策略的一致性。
需要顶级的下一代安全能力：客户对安全的要求极高，需要前面提到的App-ID, User-ID, 和WildFire沙箱等高级功能来防御高级持续性威胁（APT）和零日攻击。这是Azure Firewall基础版目前无法完全匹敌的。
复杂的多云/混合云战略：客户同时使用AWS、Azure和GCP。使用PANW的Panorama和VM-Series，他们可以用一套统一的策略去管理所有云环境，大大降低了复杂性和安全风险。
严格的合规性要求：在金融、医疗等行业，需要非常精细的流量日志和审计报告。PANW提供的日志和报告能力非常强大，能更好地满足审计要求。

## Multi Agent 框架

### Bicep
Bicep 是 Azure 的基础设施即代码（Infrastructure as Code, IaC）语言，用于以声明式方式定义和部署 Azure 资源。

## Agent 越辩越明
能够自主执行任务，而不是被动响应的多轮对话bot


## Azure 工作负载分类 

| 缩写  | 中文名  | 主要功能                 | Azure 示例                                 |
| --- | ---- | -------------------- | ---------------------------------------- |
| SoE | 交互系统 | 用户界面、交互              | App Service, Power Apps, Static Web Apps |
| SoI | 智能系统 | 数据分析、AI 推理           | Synapse, Azure ML, Power BI              |
| SoX | 体验系统 | 个性化体验（SoE + SoI 的结合） | Personalizer, Bot Service + Web 前端       |
| SoR | 记录系统 | 核心数据记录、系统记录源         | Azure SQL, Cosmos DB, Dynamics 365       |

## Azure 解决方案 Map
![Azure 解决方案 Map](/assets/images/solutionmap.png)

## Azure 认证
- **基础级**
    - AZ-900（Azure基础）
- **助理级**
    - AZ-104（管理员） → AZ-305（架构师）
    - AZ-204（开发者） → AZ-400（DevOps专家）
    - AZ-500（安全工程师） → SC-100（安全架构师）
    - AZ-700（网络工程师）
    - AZ-800 + AZ-801（Windows Server混合管理员）


